{% extends "base.html" %}

{% load crispy_forms_tags  %}

{% block title %}{{ product.name }}{% endblock title %}

{% block content %}
<div class="container">
    <div class="row align-items-start">
        <div class="col">
            {% if not product.all_photos %}
            <img src="{{ product.image.url }}" class="img-thumbnail">
            {% else %}
            {% for photo in product.all_photos %}
            <img src="{{ photo.photo.url }}" alt="{{ product.name }}" class="img-thumbnail">
            {% endfor %}
            {% endif %}
        </div>
        <div class="col">
            <p><strong>{{ product.name }}</strong></p>
            <div class="col">
                <pre>{{ product.description_all }}</pre>
            </div>
        </div>

        <div class="col">
            <p><strong>{{ "Цена:" }} {{ product.price }} {{ "руб." }}</strong></p>
            <button class="btn btn-dark" type="submit">Добавить в корзину</button>
        </div>
    </div>
    <hr>
    <h6>Отзывы</h6>
    <hr>
    {% if user.is_authenticated %}
    <h5>Добавить отзыв</h5>
    <form action="" method="post">
        {% csrf_token %}
        {{ form|crispy }}
        <button class="btn btn-dark ml-2" type="submit">Оставить отзыв</button>
    </form>
    {% endif %}
    <hr>
    {% for comment in product.comment_set.all %}
    <p><strong>{{ comment.author }}</strong></p>
    <p>{{ comment }}</p>
    {% endfor %}
    <hr>
</div>
{% endblock content %}